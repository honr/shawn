<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
	<title>Shawn - a discrete event simulator</title>
	<style type="text/css">
	<!--
		h1 {
			font-size: 18pt;
			font-family: arial;
		}

		h2 {
			font-size: 14pt;
			font-family: arial;
		}

		h3 {
			font-size: 12pt;
			font-family: arial;
		}

		p {
			font-size: 12pt;
			font-family: arial;
		}

		p.TOC {
			margin-left: 20px;
			font-size: 11pt;
			font-family: tahoma;
		}
		
		table {
			margin: 1em 1em 1em 1em;
			background: #f9f9f9;
			border: 1px #aaaaaa solid;
			border-collapse: collapse;
		}
		 
		table th, table td {
			border: 1px #aaaaaa solid;
			padding: 0.3em;
		}
		 
		table th {
			background: #f2f2f2;
			text-align: center;
		}
		 
		table caption {
			margin-left: inherit;
			margin-right: inherit;
		}
	-->
	</style>
</head>
<body>

<h1>Shawn - a discrete event simulator</h1>
<h2>Readme and build instructions</h2>

<p class="TOC">
	1. <a href="#Introduction">Introduction</a><br>
	
		&nbsp;&nbsp;&nbsp; 1.1 <a href="#Shawn">Shawn</a><br>
		&nbsp;&nbsp;&nbsp; 1.2 <a href="#Buildsystem">Buildsystem</a><br>
		&nbsp;&nbsp;&nbsp; 1.3 <a href="#Shawn_directories">Shawn directories</a></br>

	2. <a href="#Quick_start">Quick start</a><br>

	3. <a href="#Compiling_Shawn">Compiling Shawn</a><br>

		&nbsp;&nbsp;&nbsp; 3.1 <a href="#Requirements">Requirements</a><br>
		&nbsp;&nbsp;&nbsp; 3.2 <a href="#Creating_buildfiles_with_CMake">Creating buildfiles with CMake</a><br>
	
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3.2.1 <a href="#Linux_MacOSX">Linux/MacOSX</a><br>
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3.2.2 <a href="#Windows">Windows</a><br>
	
		&nbsp;&nbsp;&nbsp; 3.3 <a href="#Buildsystem_Options">Buildsystem Options</a><br>
		&nbsp;&nbsp;&nbsp; 3.4 <a href="#Building_Shawn">Building Shawn</a><br>
		&nbsp;&nbsp;&nbsp; 3.5 <a href="#Resetting_buildfiles">Resetting the buildfiles</a><br>

	4. <a href="#Extending_Shawn">Extending Shawn</a><br>
		&nbsp;&nbsp;&nbsp; 4.1 <a href="#Adding_module">Adding a new module</a><br>
		&nbsp;&nbsp;&nbsp; 4.2 <a href="#module_cmake">The module configuration file <i>module.cmake</i></a><br>

	5. <a href="#Shawn_licence">Shawn licence</a><br>
</p>

<br>

<a name="Introduction">
<h2>1. Introduction</h2>

<a name="Shawn">
<h3>1.1 Shawn</h3>

<p>

	Shawn is a discrete event simulator designed with the simulation
	of large wireless sensor networks in mind. It does not compete 
	with others well-known simulators by simulating individual ISO 
	layers and the protocols within these layers. Shawn emerged from 
	a more algorithmic approach of looking at sensor networks.<br>
	<br>
	More information can be found on the SwarmNET project page: 
	<a href="http://swarmnet.de/shawn/">http://swarmnet.de/shawn/</a>
	<br><br>
	
	Please see 3.5 <a href="#Shawn_licence">Shawn licence</a> for 
	copyright and licence information.
</p>

<a name="Buildsystem">
<h3>1.2 Buildsystem</h3>

<p>

	The Shawn buildsystem uses CMake (<a 
	href="http://cmake.org">http://cmake.org</a>) to provide an 
	easy way to build Shawn in a cross platform and compiler 
	independent fashion. Following these instructions, it is possible 
	to build Shawn under Windows (e.g. via Visual Studio), MacOSX and 
	several Linux distributions.

</p>
	
<a name="Shawn_directories">
<h3>1.3 Shawn directories</h3>

<p>
	After downloading Shawn, you should at least see the following 
	directories in the Shawn-root (among others):
</p>

<table border=0>
<tr>
	<td>bin</td>
	<td>The default directory where the shawn executable are built to.</td>
</tr>
<tr>
	<td>buildfiles</td>
	<td>All build- and projectfles (makefile) are placed in this directory by CMake.</td>
</tr>
<tr>
	<td>cmake</td>
	<td>The CMake binaries for Windows, Linux and MacOSX.</td>
</tr>
<tr>
	<td>lib</td>
	<td>The default directory where the shawn libraries are built to.</td>
</tr>
<tr>
	<td>src</td>
	<td>The complete source tree of Shawn.</td>
</tr>
</table>

<br>    

<a name="Quick_start">
<h2>2. Quick start</h2>

<p>
	Following these instructions, the experienced user can quickly 
	create the buildfiles and compile Shawn. For a more detailed 
	description see the instructions below this chapter.
</p>	

<ol>
	<li>
		<p>
			Intall the <a href="http://expat.sourceforge.net">Expat</a>
			and <a href="http://www.cgal.org">CGAL</a> libraries if
			you plan to use them with Shawn (the latest version of 
			CGAL also needs the <a href="http://www.boost.org">Boost</a> library).
		</p>
	</li>
	<li>
		<p>

			Start "cmake_linux.sh" (Linux), "cmake_macosx.sh" (MacOSX)
			or "cmake_win.bat" (Windows). Do a "configure" (click on 
			the button in Windows or pressing [c] under Linux/MacOSX)
			everytime you changed an option to update the
			buildsystem.<br><br>
			
			Under Windows, be sure to set the "Where is the code:"
			and the "Where to build the binaries:" text fields to the 
			correct paths (e.g. <tt>c:\shawn\src</tt> and 
			<tt>c:\shawn\buildfiles</tt>).
		</p>
	</li>
	<li>
		<p>
			Use the CMake interface to configure all needed paths 
			(output directory, lib paths...). See 3.3
			<a href="#Buildsystem_Options">Buildsystem Options</a>
			for a description on each option.
		</p>
	</li>
	<li>
		<p>
			Set "CONFIGURE_APPS" to "ON" if you wish to activate or 
			deactivate the modules individually.
		</p>
	</li>
	<li>
		<p>
			After everything is configured, click on "OK" in Windows
			or press [g] under Linux/MacOSX to generate the 
			buildfiles.<br>
     
			The buildfiles directory should now contain the necessary 
			files to build the Shawn executable (see 3.4
			<a href="#Building_Shawn">Building Shawn</a>).
		</p>
	</li>
</ol>

<br>

<a name="Compiling_Shawn">
<h2>3. Compiling Shawn</h2>
    
<a name="Requirements">
<h3>3.1 Requirements</h3>

<p>

	In order to build Shawn, you should have at least a properly 
	installed compiler, e.g. GCC or Visual Studio under Windows.
  
	Depending on the modules you are going to activate, you must have
	installed the Expat (<a href="http://expat.sourceforge.net">http://expat.sourceforge.net</a>)
	and/or CGAL (<a href="http://www.cgal.org">http://www.cgal.org</a>) libraries. 
	Refer to the build instructions for these libraries accordingly 
	(please note, the latest CGAL version also needs
	the Boost library for C++, <a href="http://www.boost.org">http://www.boost.org</a>).

	You also need the CMake binaries for your platform. With this 
	Shawn package, CMake binaries for Linux, Windows and MacOSX and 
	provided (you can find these in the cmake directory in the Shawn-
	root).
</p>

<a name="Creating_buildfiles_with_CMake">
<h3>3.2 Creating buildfiles with CMake</h3>

<p>
	Before building the Shawn executable, we are using CMake to 
	generate the buildfiles for us:
</p>

<a name="Linux_MacOSX">
<h3>3.2.1 Linux/MacOSX</h3>

<ol>
	<li>
		<p>
			Change the current directory to the Shawn-root and start 
			either "cmake_linux.sh" under Linux or "cmake_macosx.sh" 
			under MacOSX.<br>

     		<b>Note</b>: If you are not able to start CMake, you must 
     		set the executable flag for the start script and the 
     		cmake binaries, e.g.:<br><br>

			<tt>&nbsp;&nbsp;&nbsp; chmod +x cmake.sh cmake/linux/bin/*</tt>
		</p>
	</li>
	<li>
		<p>
  			You should see the CMake text-GUI-interface with only one 
  			option line at the top of the screen. Press [c] to start 
  			the first configure-run. New options appear.
		</p>
	</li>
	<li>
		<p>
			Now you have to edit the paths for the needed Libs 
			(expat, CGAL). Navigate with the arrow keys to the option 
			and press [enter] to edit it (don't forget to press 
			[enter] to finish editing an option).<br>

			Just leave the options blank if you do not wish to use a 
			library (e.g. leave all options including the string 
			"CGAL" blank, if you don't plan to use CGAL).<br>
     
			See 3.3 <a href="#Buildsystem_Options">Buildsystem 
			Options</a> for a description on each option.
		</p>
	</li>
	<li>
		<p>
			Navigate to the Option "CONFIGURE_APPS" and set it to 
			"ON", if you wish to activate or deactivate the modules 
			individually.
		</p>
	</li>
	<li>
		<p>
			When you are finished editing the paths, press [c] again 
			to start another configure-run. If you have choosen to 
			set "CONFIGURE_APPS" to "ON", for each available Module 
			an option appears to activate or deactivate it.
		</p>
	</li>
	<li>
		<p>
			Finally press [c] again to do a configure-run and then 
			press [g] to generate the buildfiles.<br>
     
			The buildfiles directory should now contain the necessary 
			files to build the Shawn executable (see 3.4
			<a href="#Building_Shawn">Building Shawn</a>).
		</p>
	</li>
</ol>


<a name="Windows">
<h3>3.2.2 Windows</h3>

<ol>
	<li>
		<p>
			Change the current directory to the Shawn-root and start 
			"cmake_win.bat".
		</p>
	</li>
	<li>
		<p>

			You should see the CMake GUI-interface with several pre-
			configured options. First, you must ensure that the 
			"Where is the code" and "Where to build the binaries" 
			text fields at the top of the window contain the correct 
			paths. They must contain full paths, e.g.:<br>
			
			<table border=0>
			<tr>
				<td>Where is the code:</td>
				<td><tt>c:\shawn\src</tt></td>
			</tr>
			<tr>
				<td>Where to build the binaries:</td>
				<td><tt>c:\shawn\buildfiles</tt></td>
			</tr>
			</table>
			
			Click on the button "Configure".
		</p>
	</li>
	<li>
		<p>
			In the "Select Generator" window you must now select the 
			desired project type, for example "Visual Studio 8 2005" 
			to create a VS2005 project.<br>
			Click on "OK".
		</p>
	</li>
	<li>
		<p>
			Several new options appear in the CMake window. You have 
			to edit the paths for the needed libs (expat, CGAL). 
			Click on an option and then on the button labeled with 
			"..." to bring up the "Select path" dialog for each 
			option.<br>
     
			Just leave the options blank if you do not wish to use a 
			library (e.g. leave all options including the string 
			"CGAL" blank, if you don't plan to use CGAL).<br>
			
			See 3.3 <a href="#Buildsystem_Options">Buildsystem 
			Options</a> for a description on each option.
		</p>
	</li>
	<li>
		<p>
			Navigate to the Option "CONFIGURE_APPS" and set it to 
			"ON", if you wish to activate or deactivate the modules 
			individually.
		</p>
	</li>
	<li>
		<p>
			When you have finished editing the paths, click on 
			"Configure" again. If you have choosen to set 
			"CONFIGURE_APPS" to "ON", for each available Module an 
			option appears to activate or deactivate it.
		</p>
	</li>
	<li>
		<p>
			Finally click on "Configure" again and then on "OK" to generate the buildfiles.

			The buildfiles directory should now contain the necessary 
			files to build the Shawn executable (see 3.4
			<a href="#Building_Shawn">Building Shawn</a>), e.g. the
			Visual Studio 2005 solution file "SHAWN.sln".
		</p>
	</li>
</ol>


<a name="Buildsystem_Options">
<h3>3.3 Buildsystem Options</h3>

<table border=0>
<tr>
	<th style="text-align:left;">Option</th>
	<th style="text-align:left;">Description</th>
	<th style="text-align:left;">Example</th>
</tr>
<tr>
	<td>LIB_PATH_EXPAT</td>
	<td>The path to the expat library file</td>
	<td><tt>/home/user/libs/expat-1.95.8/.libs</tt></td>
</tr>
<tr>
	<td>LIB_PATH_CGAL</td>
	<td>The path to the CGAL library file<br>(note that this example represents a CGAL build with g++ 3.3.5 under linux).</td>
	<td><tt>/home/user/libs/CGAL-3.2.1/lib/i686_Linux-2.4.26-om_g++-3.3.5</tt></td>
</tr>
<tr>
	<td>INCLUDE_PATH_EXPAT</td>
	<td>The path to the expat include files</td>
	<td><tt>/home/user/libs/expat-1.95.8/lib</tt></td>
</tr>
<tr>
	<td>INCLUDE_PATH_CGAL</td>
	<td>The path to the CGAL include files</td>
	<td><tt>/home/user/libs/CGAL-3.1/include</tt></td>
</tr>
<tr>
	<td>INCLUDE_PATH_CGAL_COMPILER_CONFIG</td>
	<td>
		This option is the path to the "compiler_config.h" file usually created by a CGAL build.<br>
		(This must be the place of "CGAL/compiler_config.h", not "compiler_config.h" directly!).
	</td>
	<td><tt>/home/user/libs/CGAL-3.1/include/CGAL/config/i686_Linux-2.4.26-om_g++-3.3.5</tt></td>
</tr>
<tr>
	<td>INCLUDE_PATH_BOOST</td>
	<td>The latest version of CGAL needs the Boost library for C++. This option is the path to the Boost include files (the root of boost).</td>
	<td><tt>/home/user/libs/boost_1_33_1</tt></td>
</tr>
</table>


<a name="Building_Shawn">
<h3>3.4 Building Shawn</h3>

<p>

	If you have not done it yet, please see 3.2
	<a href="#Creating_buildfiles_with_CMake">Creating buildfiles
	with CMake</a> on how to create the needed buildfiles.<br><br>
  
	After CMake has created the buildfiles, you should either have a
	makefile or a Visual Studio solution (SHAWN.sln) file in the 
	"buildfiles" directory.
  
	To build the Shawn executeable, change the current directory to
	"buildfiles" and start "make" or open the Visual Studio solution 
	file "SHAWN.sln" and build the target "SHAWN".<br><br>
  
	After the compilation process has finished, the executable is 
	located in the "buildfiles" directory (when compiling with Visual 
	Studio, the binary is located in "buildfiles/debug" or 
	"buildfiles/release" respectively).
</p>

<a name="Resetting_buildfiles">
<h3>3.5 Resetting the buildfiles</h3>

<p>

	To reset the buildfiles (and to start from scratch building 
	Shawn), that is, deleting all build/CMake configuration files, 
	all compiled object files and eventually the Shawn executable, 
	you just have to delete the content of the "buildfiles" 
	directory.<br><br>
	
	Please note, if you checked this Shawn version out of a SVN
	repository, you should not delete the (hidden) directory
	"buildfiles/.svn".<br><br>
	
	If you want to just delete the CMake buildsystem without deleting
	all compiled object files and the Shawn executable, choose the 
	option 'Delete Cache' from the CMake interface.<br><br>
</p>

<br>

<a name="Extending_Shawn">
<h2>4. Extending Shawn</h2>

<p>
	Extending Shawn means adding a new module in the most cases. The 
	following chapter describes, how to set up a new module and add
	the files to the buildsystem by using the CMake interface.
</p>

<a name="Adding_module">
<h3>4.1 Adding a new module</h3>

<p>
	With the CMake interface, you can easily add a new module to 
	Shawn, following these steps:
</p>

	<ol>
		<li>
			<p>
				Start "cmake_linux.sh" (Linux), "cmake_macosx.sh"
				(MacOSX) or "cmake_win.bat" (Windows).
			</p>
		</li>
		<li>
			<p>
				In the CMake window, you will see the option '<i>CREATE_NEW_MODEL</i>'.
				Set it to 'ON' and do a configure-run by pressing [c] (Linux/MacOSX)
				or by clicking on "Configure" (Windows).
			</p>
		</li>
		<li>
			<p>
				Two new options will appear: '<i>NEW_MODULE_NAME</i>' and
				'<i>NEW_MODULE_LIPDEP</i>'.<br><br>
				
				Set '<i>NEW_MODULE_NAME</i>' to the name of the new module. This string
				specifies the path, the module name and the C++ namespace of the module
				at the same time (the module name follows the same naming conventions like
				a C++ class name, e.g. no white spaces are allowed).<br><br>
				
				The '<i>NEW_MODULE_LIPDEP</i>' option is a white space seperated list of
				the libraries, this module depends on. For example, if the new module
				needs the Expat and CGAL libs, set the option to "expat cgal" (without
				the quotes).
			</p>
		</li>
		<li>
			<p>
				By doing another configure-run (pressing [c] under Linux/MacOSX, or by
				clicking on "Configure" under Windows), the new module will be created and
				a message box informs you, where to find the new files.
			</p>
		</li>
		<li>
			<p>
				In order to finally add the new files to the buildsystem, a last configure-run is
				needed. After that, the module has been added and in the case, the
				'CONFIGURE_APPS' option is 'ON', you should see the new module in the
				CMake interface.
			</p>
		</li>
	</ol>

<p>
	<b>Note:</b><br>
	To add another module, just change the '<i>NEW_MODULE_NAME</i>' 
	and '<i>NEW_MODULE_LIPDEP</i>' options and do two configure-runs
	as described above.
</p>


<a name="module_cmake">
<h3>4.2 The module configuration file <i>module.cmake</i></h3>

<p>
	Every single module (app) in Shawn has it's own module configuration
	file, named "<i>module.cmake</i>" that is located in the appropriate
	apps directory (e.g. src/apps/helloworld). This file defines the following
	attributes:
</p>
	
	<table border=0>
	<tr>
		<th>Attribute</th>
		<th>Description</th>
		<th>Example</th>
	</tr>
	<tr>
		<td><tt>moduleName</tt></td>
		<td>Defines the name of the module. It is recommended to use only uppercase.</td>
		<td><tt>set ( moduleName HELLOWORLD )</tt></td>
	</tr>
	<tr>
		<td><tt>moduleStatus</tt></td>
		<td>
			Defines the default status of this module.<br>ON means, the module is 
			active and will be added to the buildsystem, OFF means, the module
			will be ignored.
		</td>
		<td><tt>set ( moduleStatus ON )</tt></td>
	</tr>
	<tr>
		<td><tt>moduleLibs</tt></td>
		<td>
			A white space seperated list of libraries, the module depends on.
		</td>
		<td><tt>set ( moduleLibs expat cgal )</tt>
			<br>or<br>
			<tt>set ( moduleLibs )</tt>
			for no lib dependance.
			</td>
	</tr>
	</table>

<p>
	<b>Note:</b><br>
	The module name must correspond to the directory name of the 
	module (not case sensitive). So the module with name "HELLOWORLD" 
	must be located in a directory named "helloworld".
</p>

<br>

<a name="Shawn_licence">
<h2>5 Shawn licence</h2>

<p>
	<tt>
		Copyright (c) 2004, SwarmNet (www.swarmnet.de) project
		All rights reserved.<br><br>
		
		Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:<br>
		
		<ul>
		    <li>Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</li>
			<li>Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</li>
			<li>Neither the name of the SwarmNet (www.swarmnet.de) project nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</li>
		</ul>
		THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
	</tt>
</p>

<br><br>

</body>
</html>